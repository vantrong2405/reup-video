---
alwaysApply: true
---
# Rules Index - N8N Workflow Development

## 1. Danh sách Rules Files

### 1. **convention.mdc** (alwaysApply: true)
   - **Mục đích:** Quy tắc phát triển workflow n8n
   - **Nội dung:** Coding standards, node usage, communication protocols
   - **File path:** `.cursor/rules/convention.mdc`

### 2. **flow-project-overview.mdc** (alwaysApply: true)
   - **Mục đích:** Tổng quan về flow của project
   - **Nội dung:** Flow diagrams, dependencies, schema
   - **File path:** `.cursor/rules/flow-project-overview.mdc`

---

## 2. Chi tiết Index theo Topics

### 2.1 Development Rules (convention.mdc)

#### 1.1 Greeting Protocol
- **Location:** convention.mdc:7-8
- **Content:** Luôn chào "Boss trọng đại ka" khi mở đầu

#### 1.2 Node Selection Priority
- **Location:** convention.mdc:10-14
- **Key Points:**
  - Ưu tiên node built-in của n8n
  - KHÔNG tự ý dùng HTTP Request/Command node
  - Tìm node native trước

#### 1.3 Language Conventions
- **Location:** convention.mdc:16-22
- **Key Points:**
  - Code: Tiếng Anh (variables, functions, comments)
  - Chat với user: Tiếng Việt
  - Technical terms có thể dùng tiếng Anh

#### 1.4 Code Quality Standards
- **Location:** convention.mdc:24-30
- **Key Points:**
  - Code clean, KHÔNG comment trừ khi cần thiết
  - KHÔNG phá logic cũ trừ khi user yêu cầu hoặc logic sai
  - Code bằng tiếng Anh

#### 1.5 Fallback Strategy
- **Location:** convention.mdc:32-47
- **Key Points:**
  - Mục đích: Code đúng đủ và chạy được, KHÔNG phải bằng mọi cách
  - KHÔNG dùng fallback trừ khi user yêu cầu rõ ràng
  - Tránh fallback để kiểm soát luồng code
  - Fail rõ ràng thay vì fallback im lặng

#### 1.6 Node Usage Best Practices
- **Location:** convention.mdc:49-52
- **Key Points:**
  - KHÔNG dùng "Prepare Message" node
  - Viết logic trực tiếp vào node cần dùng
  - Tránh node trung gian thừa

#### 1.7 Conditional Logic
- **Location:** convention.mdc:54-57
- **Key Points:**
  - Ưu tiên IF node của n8n
  - KHÔNG tự ý dùng JavaScript cho if-else
  - Chỉ dùng Code node khi IF node không đáp ứng

#### 1.8 Pre-Development Requirements
- **Location:** convention.mdc:59-71
- **Key Points:**
  - PHẢI làm rõ ranh giới trước khi code
  - Input/Output của mỗi node
  - Data flow, error handling, edge cases
  - KHÔNG tạo các mục đích không cần thiết
  - Code đúng đủ và chạy được

#### 1.9 Communication Protocol
- **Location:** convention.mdc:73-80
- **Key Points:**
  - Nếu không hiểu: PHẢI hỏi lại user
  - KHÔNG tự ý đoán và code
  - Suggest 2-3 lựa chọn + đề xuất best practice

#### 1.10 Prompt Refinement Protocol
- **Location:** convention.mdc:82-99
- **Key Points:**
  - Tự động đề xuất prompt được viết lại
  - Prompt phải rõ ràng, có context đầy đủ
  - Quy trình: Nhận → Đề xuất → Giải thích → Chờ đồng ý → Xử lý

#### 1.11 MCP Tools Priority
- **Location:** convention.mdc:101-106
- **Key Points:**
  - Ưu tiên MCP Thinking + Memory
  - Luôn kiểm tra MCP tools trước
  - Sử dụng cho bài toán phức tạp

#### 1.12 Workflow Design Principles
- **Location:** convention.mdc:108-116
- **Key Points:**
  - Keep it simple
  - Use native nodes
  - Minimize node count
  - Clear data flow
  - Proper error handling
  - Tránh fallback không cần thiết
  - Fail fast, fail clear

---

### 2.2 Project Flow Overview (flow-project-overview.mdc)

#### 2.1 Tổng quan Project
- **Location:** flow-project-overview.mdc:7-15
- **Content:** Tổng quan dự án YouTube Video Processing & Publishing

#### 2.2 Main Flow Diagram
- **Location:** flow-project-overview.mdc:19-34
- **Content:** Sơ đồ flow chính từ Schedule Trigger đến các nhánh

#### 2.3 Chi tiết các nhánh Flow
- **Location:** flow-project-overview.mdc:38-130
- **Sub-flows:**
  - Nhánh A: Publish video = TRUE (Meta_data TRUE/FALSE)
  - Nhánh B: Publish video = FALSE (Process Video Flow)

#### 2.4 Điều kiện quan trọng
- **Location:** flow-project-overview.mdc:134-147
- **Content:** Các IF conditions (Publish video, Meta_data, Check Should Upload)

#### 2.5 Key Dependencies
- **Location:** flow-project-overview.mdc:151-158
- **Content:** yt-dlp, ffmpeg, rclone, Gemini API, Google Sheets API, YouTube API

#### 2.6 Google Sheets Schema
- **Location:** flow-project-overview.mdc:162-180
- **Content:** Required và Optional fields

#### 2.7 Error Handling Strategy
- **Location:** flow-project-overview.mdc:184-190
- **Content:** Fallback strategies cho các trường hợp lỗi

#### 2.8 Key Notes
- **Location:** flow-project-overview.mdc:194-199
- **Content:** Các lưu ý quan trọng về workflow

---

## 3. Quick Reference

### Khi cần tìm quy tắc về:
- **Coding standards** → convention.mdc:24-30
- **Fallback strategy** → convention.mdc:32-47
- **Node selection** → convention.mdc:10-14
- **Language conventions** → convention.mdc:16-22
- **Communication** → convention.mdc:73-99
- **MCP tools** → convention.mdc:101-106
- **Project flow** → flow-project-overview.mdc
- **Error handling** → flow-project-overview.mdc:184-190
- **Google Sheets schema** → flow-project-overview.mdc:162-180

---

## 4. Notes

- Tất cả rules có `alwaysApply: true` sẽ được áp dụng tự động
- File INDEX.mdc này có `alwaysApply: true` - được áp dụng tự động
- Khi thêm rules mới, cần cập nhật file INDEX này
